test_that("handling accents without stringi", {
  mockery::stub(ascii, "rlang::is_installed", FALSE)

  expect_true(grepl("^[^A-Za-z]*a", ascii("á")))
  expect_true(grepl("^[^A-Za-z]*a", ascii("à")))
  expect_true(grepl("^[^A-Za-z]*a", ascii("â")))
  expect_true(grepl('^[^A-Za-z]*a', ascii("ä")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("é")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("è")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("ê")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("ë")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("í")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("ì")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("î")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("ï")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("ó")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("ò")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("ô")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("ö")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("ú")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("ù")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("û")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("ü")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("ẃ")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("ẁ")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("ŵ")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("ẅ")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("ý")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("ỳ")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("ŷ")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("ÿ")))

  expect_true(grepl("^[^A-Za-z]*a", ascii("Á")))
  expect_true(grepl("^[^A-Za-z]*a", ascii("À")))
  expect_true(grepl("^[^A-Za-z]*a", ascii("Â")))
  expect_true(grepl("^[^A-Za-z]*a", ascii("Ä")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("É")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("È")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("Ê")))
  expect_true(grepl("^[^A-Za-z]*e", ascii("Ë")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("Í")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("Ì")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("Î")))
  expect_true(grepl("^[^A-Za-z]*i", ascii("Ï")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("Ó")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("Ò")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("Ô")))
  expect_true(grepl("^[^A-Za-z]*o", ascii("Ö")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("Ú")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("Ù")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("Û")))
  expect_true(grepl("^[^A-Za-z]*u", ascii("Ü")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("Ẃ")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("Ẁ")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("Ŵ")))
  expect_true(grepl("^[^A-Za-z]*w", ascii("Ẅ")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("Ý")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("Ỳ")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("Ŷ")))
  expect_true(grepl("^[^A-Za-z]*y", ascii("Ÿ")))
})
